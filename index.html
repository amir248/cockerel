<html>
<meta charset="utf-8">
<title>Game cockerel</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
    * {
        padding: 0;
        margin: 0;
    }
    body{
        display:flex;
        max-width: 100%;
        max-height: 100%;
        background-color: rgba(255, 127, 80, 0.219);
    }
    button {
        background-color: rgba(230, 180, 180, 0.158);
        border: 10px;
        width: 50px;
        height: 75px;
    }
    .info {
        display: block;
        position: absolute;
        text-align: center;
        margin-left: 50%;
        margin-right: 50%;
        top: 5%;
    }
    .hedge_stone{
        position:absolute;
        margin-left: 5px;
        width: 11%;
        height: 50px;
        top: -50px;
        background-color: brown;
        opacity:1;
    }

    .flex {
        width: 90%;
        height: 100%;
        display: flex;
    }
    .flexTwo{
      position:fixed;
      width: 90%;
      height: 100%;
      display: flex;
      opacity:0.3;
    }
    .flex2{
        bottom: 4px;

    }
    .row {
        display:flex;
        /* position:static; */
        align-items: center;
        justify-content: center;
        width: 25%;
        height: 100%;
        background-color: rgb(201, 230, 185);
        /* flex-flow: row; */
        /* border: 1px solid rgb(128, 226, 128); */
        opacity:1;
    }
    #cockerel{
        display:block;
        position:absolute;
        width:25px;
        height: 30px;
        border-radius: 25%;
        background-color: chocolate ;
        bottom:10%;
        opacity:1;
    }
    /* #pic1,#pic2,#pic3,#pic4,#pic5,#pic6{
      position:relative;
    } */
</style>
<body>
    <div class="flex">
        <div class="row" > </div>
        <div class="row" > </div>
        <div class="row" > </div>
        <div class="row" > </div>
        <div class="row" > </div>
        <div class="row" > </div>
            <div class="flex2" align="center">
                <br>
                <button onClick="left_button()">
                <=</button> <button onClick="right_button()">=>
                </button>
                <br>
                <span id='timer'></span>
            </div>

    </div>
    <div class="flexTwo">
        <div class="row" id='pic1'> </div>
        <div class="row" id='pic2'> </div>
        <div class="row" id='pic3'> </div>
        <div class="row" id='pic4'> </div>
        <div class="row" id='pic5'> </div>
        <div class="row" id='pic6'> </div>
            <div class="flex2" align="center">
                <br>
                <button onClick="left_button()">
                <=</button> <button onClick="right_button()">=>
                </button>
                <br>
            </div>

    </div>
    <style>
        .info {
          padding: 15px;
          border: 1px solid #d6e9c6;
          border-radius: 4px;
          color: #3c763d;
          background-color: #dff0d8;
          position: absolute;
          display: block;
          top: 5%;
          margin-right: 40%;
          margin-left: 40%;
        }
        </style>
        <script>
        /* отображение текста на экране */
          let div = document.createElement('div');
          div.className = "info";
          let message = "Click here to start game or keygen Ener!!! KeyDown \'S\' - left, KeyDon \'F\' - Right";
          div.innerHTML = `${message}`;
          document.body.append(div);

    let count=+0;
    let oK=300;
    let intervall=0;
    let timer=+0;
    let ti=+0;
    let ti2=100;
    document.querySelector('.info').addEventListener('click',goPlayGame);
    // window.addEventListener('keydown',(e)=>{
    //   if(e.key=='Enter'){
    //     goPlayGame();
    //   }
    // })
function goPlayGame(){
    count++;
    if(count==1){
      intervall=setInterval(()=>addBlock(),`${oK}`);
      timer=setInterval(()=>{document.getElementById('timer').innerHTML='<span style="color:green;font-size:20px;border:3px solid green;">' +`${ti++}`+'</span>'},`${ti2}`);
      div.innerHTML="go!";
    }else if(count==2){
      clearInterval(intervall);
      clearInterval(timer);
      // clearInterval(interval);
      console.log(count+"_"+'and'+oK);
      div.innerHTML="<span style='color:red'>paused!</span>";
      count=0
    }else{
      oK=300;
      console.log(count+"_"+'and'+oK);
      count=0;
    }
  }

        function addBlock() {
            let line = document.getElementsByClassName("row")[Math.floor(Math.random() * 6)];
            let block = document.createElement("p");
            block.classList.add("hedge_stone");
            line.appendChild(block);
            let distance_stone = 0;
            let interval = setInterval(peremeshenie, 1);
            function peremeshenie() {
                block.style.top = distance_stone;
                if (distance_stone < window.innerHeight - 50) { /* innerWidth - окно экрана в высоту*/
                    distance_stone = distance_stone + 1;
                    console.log(distance_stone);
                }
                if (distance_stone > window.innerHeight - 51) {
                    // block.style.display = 'none';
                    line.removeChild(block);
                    window.clearInterval(interval);
                }
            }
        }
        // -----------------------------------
        //-----переменные для управления-----
        //-----------------------------------
        // var rightPressed = false;
        // var leftPressed = false;
        // var jumpPressed = false;
        // var upPressed = false;
        // var downPressed = false;
        // ------------------------------------
/* скрипт тут ля управления перемещениями с клавиатура */
document.addEventListener('keydown', keyDownHangler, false);
        function keyDownHangler(e) {
            if (e.key == "f") {
                right_button();
            } else if (e.key == "s") {
                left_button();
            }else if(e.key==' '){
              console.log('Space');
            }else if(e.key=='Enter'){ // goPlayGame
              goPlayGame();
            }else if(e.key=="S"){
              left_button();
            }else if(e.key=="F"){
              right_button();
            }else if(e.key=="Ы"){
              left_button();
            }else if(e.key=="А"){
              right_button();
            }else if(e.key=="ы"){
              left_button();
            }else if(e.key=="а"){
              right_button();
            } else {
                return;
            }
        }
        // if (keyDown = 'KeyF') {
        //     right_button();
        // }
        // if (right_button) {
        //     left_button();
        // }
        document.onkeypress = function (event) {
            console.log(event);
        }
        var i = 3;
        var pic = document.getElementById('pic' + i).innerHTML = '<p id="cockerel"></p>';
        function left_button() {
            if (i > 1) {
                i = i - 1;
                document.querySelector('#pic' + i).innerHTML = '<p id="cockerel"></p>';
                document.querySelector('#pic' + (i + 1)).innerHTML = ' ';
                console.log(i);
            } else if (i <= 1) {
                return;
            }
        }
        function right_button() {
            if (i < 6) {
                i++;
                document.querySelector('#pic' + i).innerHTML = '<p id="cockerel"></p>';
                document.querySelector('#pic' + (i - 1)).innerHTML = ' ';
                console.log(i);
            }
            else if (i >= 6) {
                return;
            }
        }
        let promise = new Promise((resolve,reject)=>{
          setTimeout(()=>{
            // resolve('oooooK');
            reject(new Error('8===>'));
          },1000);
        });
        // promise.then((data)=>console.log(data));
        promise.catch((error)=>console.log(error));
    </script>
</body>

</html>
